\input{src/intros/5-problemasysoluciones}

\section{Identificación de problemáticas actuales}
\label{sec:identificacion_problemas}

Como vimos anteriormente, para el desarrollo de una red social distribuida, se necesitan
soluciones para sus funcionalidades básicas (Capítulo~\ref{sec:conclusiones_soa}). Ahora,
nos enfocaremos en presentar que problemáticas surgen al pasar de una red
social centralizada a una arquitectura P2P.


De tal forma de dilucidar de forma adecuada las
problemáticas para su implementación, se analizarán las funcionalidades necesarias para el
funcionamiento del sistema que fueron detalladas anteriormente, viendo las
diferencias de requerimientos entre un sistema centralizado y uno P2P. La lista
de funcionalidades a analizar es:
\begin{enumerate}
    \item{Ingreso al sistema a través del par usuario-contraseña.}
    %\item{Perfil de usuario.}
    \item{Lista de contactos.}
    \item{Grupos, círculos y organizaciones entre usuarios.}
    \item{Publicación de contenido.}
    \item{Búsqueda de usuarios, grupos y contenido publicado.}
    \item{Configuraciones de privacidad.}
    \item{Integración con otros servicios y aplicaciones.}

    %\item Almacenamiento de la información.
    %\item Búsquedas de la información.
    %%\begin{itemize}
    %    %\item {Perfil de usuario}
    %    %\item {Publicación de contenido}
    %    %\item Búsqueda e identificación dentro de la red.
    %    %\begin{itemize}
    %        %\item {Lista de contactos}
            %\section{Grupos, círculos y organizaciones entre usuarios.}
    %        %\item {Búsqueda de usuarios, grupos y contenido publicado}
    %    %\end{itemize}
    %    %\item Conectividad y disponibilidad de la información.
    %%\end{itemize}
    %\item Seguridad.
    %%\begin{itemize}
    %    %\item {Configuraciones de privacidad}
    %%\end{itemize}
    %\item Integración con otros servicios y aplicaciones.

\end{enumerate}
\subsection{Ingreso al sistema a través del par usuario-contraseña.}
\label{sec:login}

    El usuario se registra en el sistema utilizando como claves para reingresar a
    ella un nombre de usuario y una contraseña. Posteriormente, el usuario
    puede ingresar al sistema haciendo uso de su nombre de usuario y contraseña
    preestablecida, pudiendo hacerlo desde cualquier dispositivo diferente del
    usado para registrarse en el sistema. En caso de que la contraseña se
    olvide, el sistema debe permitir al usuario recuperarla. El nombre de
    usuario utilizado para ello debe ser único, siendo reservados según orden de
    registro. Para una mayor facilidad de uso del sistema, también se debe
    soportar que el sistema pueda recordar el último ingreso, de
    forma de no necesitar pasar por nuevos procedimientos de ingreso cada
    vez que, sin haberse explícitamente desconectado, se quiera volver a ingresar a la red social.

    Basándose en el estándar ISO
    27002~\cite{iso27002_2005}, los siguientes requerimientos son recomendados para esta funcionalidad:
    \begin{itemize}
      \item Las contraseñas no deben ser almacenadas ni trasmitidas en texto plano.
      \item Archivos con las contraseñas deben almacenarse separados información de la aplicación.
      \item Un usuario debe ser capaz de escoger su propia contraseña y cambiarla posteriormente.
      \item Limitar el número de intentos fallidos para acceder al sistema, al
        mismo tiempo que se limita los tiempos máximos y mínimos para el procedimiento
        de entrada. 
      \item En caso de solicitar la recuperación de contraseña:
      \begin{itemize} 
        \item Antes de permitir que el usuario escoja una nueva contraseña,
          establecer métodos para verificar la identidad de un usuario.
        \item Comunicar al usuario afectado por el cambio de contraseña de las acciones realizadas sobre ella.
        \item Tener procedimientos que permitan la recuperación y restauración de las operaciones del usuario en un escala de tiempo razonable.
        \item Un usuario legítimo debe poder ser capaz de recuperar llaves de acceso a su cuenta que hallan sido olvidadas/perdidas.
      \end{itemize}
    \end{itemize}
    
    Adicional a esto, existen ataques en los cuales se intentan acaparar una
    gran cantidad de nombres de usuario, de tal forma de imposibilitar el registro
    a otros usuarios en la red social. Considerando esto, se requiere además
    que el sistema limite la cantidad de operaciones de registros que un
    dispositivo puede realizar, de forma de mitigar lo más posible este tipo de
    problemas.


    % centralizados
    \paragraph{Sistemas centralizados}
      Actualmente soportan esta funcionalidad, pudiendo cubrir con todos los
      requerimientos nombrados anteriormente. No tienen problemas en la
      implementación gracias al control completo que se posee sobre del sistema y las
      operaciones internas de éste.

    \paragraph{Sistemas P2P}
      Actualmente no existe un sistema P2P completamente descentralizado que posea esta funcionalidad
      implementada. La identificación de usuario a través de la posesión de llaves criptográficas es
      el método más comúnmente en este tipo de sistemas, las cuales son
      utilizadas por cada nodo sin que las llaves privadas sean enviadas a través de
      la red. Adaptaciones de éste tipo de sistemas pueden llegar a suplir la
      mayoría de los requerimientos de esta funcionalidad, pero algunos presentan
      grandes dificultades para su implementación.

      % problemas
      % PROBLEM: limite de operaciones sobre la red (denegaciones de servicio)
      Las redes P2P no poseen formas de limitar la cantidad de veces en que un nodo
      puede realizar una operación dentro de la red, dificultando la limitación
      del número de intentos fallidos para acceder al sistema y el control de
      operaciones de registros que un nodo puede realizar.

      % PROBLEM: informacion cifrada expuesta a todos los usuarios (ataques offline)
      Debido a la naturaleza de este tipo de redes, la información requerida
      para verificar una contraseña se encuentra expuesta a todos los usuarios de la
      red.

      % PROBLEM: actualizaciones de llaves críticas para el funcionamiento de operaciones en el sistema
      En el caso de que una contraseña sea cambiada, las sesiones de usuario
      iniciadas con la contraseña anterior deben ser revocadas por el sistema.
      Esto significa que las llaves utilizadas para identificar al usuarios deben ser
      actualizadas en el sistema. Esta operación debe ser completada sin que
      otro dispositivo haga uso de las credenciales anteriores para obtener acceso y
      realizar operaciones privilegiadas dentro del sistema.

      %En el caso específico del sistema de identificación del usuario, la
      %operación de actualizar las credenciales debe completarse sin que otro
      %dispositivo haga uso de las credenciales anteriores para obtener
      %acceso y realizar operaciones privilegiadas dentro del sistema.
      Básicamente, el sistema debe poder bloquear las credenciales antiguas
      mientras que las actualiza por unas nuevas. Dependiendo de la cantidad de
      nodos involucrados en la mantención de las credenciales de los usuarios y
      del sistema de identificación, el tiempo que tome realizar esta operación
      es variable. Basta con que uno de los nodos involucrados no se encuentre
      conectado en el momento de la actualización para que la operación deba
      esperar a su reconexión para darse por finalizada.
      El problema del bloqueo de las credenciales utilizadas se topa con la
      limitante demostrada por el teorema CAP~\cite{cap_theorem}, el cual establece que es
      imposible para un sistema de cómputo distribuido garantizar
      simultáneamente la consistencia, disponibilidad y tolerancia a fallos.
      Si bien no es posible contar con estas tres propiedades simultáneamente,
      si es posible reducir al mínimo los intervalos de tiempo en donde el
      sistema se encuentre susceptible a inconsistencias y fallos.

      Por ello, es importante que los nodos se mantengan actualizados al último
      estado mantenido por la aplicación, teniendo en cuenta que a mayor
      frecuencia de actualizaciones mayor el costo de mantención del sistema.
      Para nodos que no se encuentren conectados en el momento de algún cambio
      del estado de las credenciales del usuario, al momento de su reconexión es importante que revise
      todas las actualizaciones que puedan haber sucedido cuando no se encontraba
      conectado con el sistema, actualizando su propio estado según corresponda.
      
      Normalmente los sistemas de ruteo P2P centralizados ya cuentan con
      mecanismos de sincronización para evitar la segmentación de la red. De
      forma similar, se requerirá de una solución que se integre de forma adecuada a
      las operaciones que deberán realizarse en el sistema para evitar
      inconsistencias en la red.
    
      % PROBLEM: colusión de múltiples nodos de forma de comprometer operaciones basadas en el conocimiento de X nodos 
      Por último, en el caso de recuperación de contraseñas, la información de
      una forma u otra, se encontrará almacenada en diferentes nodos de la red
      social. Esto hace que el sistema sea vulnerable a que múltiples nodos coludan
      entre sí para recuperar la contraseña - u otro dato privado que se encuentre en
      el sistema - de un usuario. Es por ello que se requieren sistemas adicionales
      de seguridad que prevengan, o disminuyan al mínimo, esta posibilidad.

%\subsection{Perfil de usuario.}
%\label{sec:perfil}
%
%    
%    El usuario se registra en el sistema utilizando como claves para reingresar a
%    ella un nombre de usuario y una contraseña.
%    
%    % centralizados
%    \paragraph{Sistemas centralizados}
%    En sistemas centralizados, se pueden almacenar sin problemas información en una
%    base de datos, pudiendo controlar tanto los dispositivos de almacenamientos
%    físicos donde se almacena la información como los accesos a la información por
%    medio de software especializado a través del front-end desarrollado
%    especialmente para ello. El sistema es homogéneo y completo, pero
%    tiene un gran costo asociado a la mantención de sus servidores en linea, debido
%    al gran costo de ancho de banda utilizado, y la mantención de réplicas de la
%    información para evitar la pérdida de información ante fallas de hardware.
%    Gracias a esto, es fácil implementar los algoritmos necesarios para la
%    mantención de un perfil de usuario. Por ejemplo, las búsquedas de información
%    se pueden resolver a través de consultas a la base de datos. Como el sistema es
%    completo, toda la información de la red social es alcanzada por la consulta, y
%    se pueden verificar a través de la misma base de datos quienes son capaces de
%    visualizar, editar o eliminar la información que se busca.
%    
%    \paragraph{Sistemas P2P}
%    % problemas:
%    % \item Control de privilegios de los datos distribuidos por la red
%    Por otro lado, en sistemas P2P, los datos almacenados son distribuidos a través de la red,
%    almacenando réplicas en nodos geográficamente lejanos, pudiendo otorgar una
%    alta disponibilidad de los datos a un bajo costo. El problema surge en el
%    control de acceso de los datos almacenados en la red. Como no se tiene un
%    control sobre todos los nodos, se requiere de un sistema adicional
%    que permita seleccionar los permisos que otros usuarios tendrán sobre los
%    archivos almacenados en la red.


\subsection{Lista de contactos.}
\label{sec:contactos}

    Cada usuario mantiene una tabla con la lista de relaciones, la cual almacena la información
    sobre otros usuarios con los que se relaciona dentro de la red. La tabla con la
    lista de relaciones de un usuario normalmente es compartida con todos los que comparte
    alguna relación.
    
    % centralizados
    \paragraph{Sistemas centralizados}
     En redes centralizadas, el manejo de la lista de contactos no
    presenta ningún problema gracias a que los algoritmos implementados tienen
    acceso a una base de datos confiable y completa.
    La identificación de los usuarios se hace consultando la base de datos de la
    red, por lo que la búsqueda de nuevos contactos no presenta ser un problema,
    pudiendo consultar utilizando diferentes atributos a la red social, siendo esta
    muchas veces la que puede recomendarte un nuevo contacto.
    
    % p2p 
    \paragraph{Sistemas P2P}
    % problemas
    % \item Falta de mecanismos para la relaización de búsquedas complejas 
     En redes P2P un usuario puede relacionarse fácilmente con un
    nodo en la red, representando los enlaces y relaciones entre los usuarios de
    forma análoga a los leafsets mantenidos por cada nodo. Pero, a diferencia de un
    sistema centralizado, la búsqueda de nuevos contactos se torna mucho más compleja.
    Los algoritmos de ruteo dentro de un DHT no están diseñados para realizar consultas de rango o
    complejas, necesitando de sistemas de indexación adicionales para la
    realización de éste tipo de búsquedas.

\subsection{Grupos, círculos y organizaciones entre usuarios.}
\label{sec:grupos}

    El usuario debe ser capaz de organizar sus usuarios y formar grupos o
    círculos con ellos, de tal forma de poder compartir contenido con usuarios
    específicos, grupos de usuarios o uniones de entre ellos.
    % centralizados
    \paragraph{Sistemas centralizados}
     En redes centralizadas, la formación de agrupaciones es fácilmente alcanzada
    relacionando los usuarios dentro de una nueva entidad en la base de dados,
    tratando a la nueva entidad de forma similar a la como funciona la mantención
    de un perfil de usuario normal. La organización se maneja internamente por el
    sistema, almacenando la información en una base de datos, y de la misma forma
    maneja internamente el control de acceso de los usuarios a la información del sistema.

    % p2p 
    \paragraph{Sistemas P2P}
    % problemas
    % \item  control de privilegios... 
    La información de un grupo o conjunto de usuarios puede almacenarse sin problemas en redes
    P2P siempre y cuando cuente con un sistema de control de acceso que lo
    permita.
     Es posible lograr el control de acceso a un conjunto de
    archivos compartidos utilizando combinaciones de técnicas de cifrado simétrico
    y asimétrico. Un archivo o grupo de archivos puede cifrarse utilizando una
    llave simétrica, para luego cifrar esa llave simétrica con una llave
    asimétrica que se comparte entre los usuarios a los que se les quiere dar
    acceso. Este ejemplo simple de control de acceso para grupos de usuarios, a
    pesar de cumplir con las funciones básicas, no es eficiente en el momento de
    remover a un usuario del grupo con el que se está compartiendo, requiriendo
    para ello el recifrado de todos los datos compartidos y una
    redistribución de las llaves entre todos los participantes. Debido a esto y
    a otros problemas no vislumbrados que puedan surgir, se podrían investigar
    nuevas formas de lograr esta funcionalidad que mejoren las falencias que un
    esquema simple de cifrado presenta.

\subsection{Publicación de contenido.}
\label{sec:publicaciones}

    En la red social, toda información que el usuario deposite debe tener espacio
    donde ser almacenada, manteniéndola protegida de otros usuarios que no posean
    los permisos para acceder a ella, y ordenada de forma cronológica según
    cuando fueron éstos publicados.
    En la red social, toda información que el usuario deposite debe ser:
    \begin{itemize}
      \item Ordenada cronológicamente.
      \item Protegida de usuarios que no tengan permisos permisos para acceder/leer/modificar/eliminar.
      \item Protegida de usuarios sin permisos para acceder/leer/modificar/eliminar.
    \end{itemize}
    De la misma forma, esta información debe poder ser encontrada, obtenida y
    modificada por los usuarios que cuenten con la autorización para ello.
    Además, usando como base las agrupaciones realizadas por los contactos de un
    usuario, se deben poder determinar que visibilidad tendrán los documentos compartidos en la red social. Por ejemplo, organizar los
    contactos en grupos como \textit{familia}, \textit{amigos} y \textit{trabajo}
    permite que las personas puedan fácilmente compartir información con el círculo
    de contactos intencionado.
    
    \paragraph{Sistemas centralizados}
    En una red social centralizado, sólo se requiere de una capacidad de
    almacenamiento que de abasto para la cantidad de datos que los usuarios
    almacenen, y una base de datos que la relacione con la información de cada
    usuario, de forma que pueda determinar que privilegios estos tienen con cada
    documento almacenado. Debido a la naturaleza (no sólo texto, si no también
    imágenes y video) y la cantidad de datos almacenados por cada
    usuario, el costo de almacenamiento es un problema a medida que la red crece en
    usuarios y antigüedad, ya que ninguno de estos es eliminado de la red.
    
    \paragraph{Sistemas P2P}
    % problemas
    % \item Límite del espacio de almacenamiento que los usuarios están dispuestos a compartir.
    % \item Manejo de los diferentes privilegios de acceso y lectura para usuarios y grupos de usuarios.
    % \item Mantención de datos actualizados en las diferentes réplicas frente a frecuentes salidas y entradas de usuarios
    % mejoras?
    % \item Almacenamiento con funcionalidades diferenciadas para imágenes y video.# Streaming de datos p2p?
    % \item Mejora de la disponibilidad de la información utilizando la información de diferencia horaria
    Un sistema P2P posee la cualidad de contar con los recursos compartidos de sus
    propios usuarios. Esto permite que el sistema no requiera de un sistema de
    almacenamiento adicional para la mantención de los datos de los usuarios, pero
    dependiendo cuanto sean los recursos que los usuarios estén dispuestos a ceder
    a la red social esto podría presentar a ser un problema para el almacenamiento
    de los datos de la misma, que a pesar de poder esto ser solucionado haciendo uso de servicios externos para el
    almacenamiento de los tipos de datos más pesados de la red, imágenes y video,
    la implementación de un sistema de almacenamiento que trate de forma diferente
    estos tipos de datos, como por ejemplo para ver videos vía streaming,
    requeriría de una mayor investigación.
    Otro punto es la disponibilidad de los datos publicados en la red. Gracias a la
    arquitectura de las redes P2P estructuradas, se puede asegurar una alta
    disponibilidad de los datos almacenados de la misma. Ahora, lo que no es fácil
    de implementar en este tipo de redes, es tener diferentes privilegios de
    acceso y escritura de forma diferenciada para los miembros y grupos de miembros
    de la red social, representando un problema real en la implementación de una
    arquitectura completamente distribuida. 
    
    %%%% TODO: ORDENAR, nose donde poner esto :@
    %%Para ello, la red social puede contar con un servicio o capa de almacenamiento de la
    %%información. En redes P2P estructuradas es común la utilización de DHTs para la mantención del servicio de
    %%almacenamiento de datos. 
    %%Al basar el sistema de almacenamiento en un DHT, se obtienen múltiples
    %%beneficios, entre los que se encuentran la auto-mantención de réplicas
    %%de la información almacenada, balancear la carga de acceso
    %%a piezas únicas de información entre diferentes nodos y tiempos logarítmicos
    %%para la búsqueda de la información.  Aún así, debido a los altos requerimientos
    %%para la implementación de una red social, un simple DHT no es suficiente,
    %%requiriendo para algunas funcionalidades de mecanismos y protocolos extras.
    %%A continuación, se analizarán las diferentes funcionalidades relacionadas con
    %%el sistema de almacenamiento, nombrando sus problemas y soluciones para la
    %%implementación.
    
    
    
    % TODO: Problema de control
    %En un sistema P2P, cada nodo tiene autoridad dentro de si mismo, pero no ........
    %Por otro lado, redes P2P permiten que cada usuario pueda almacenar localmente
    %información relevante sobre los contactos que posee, junto con otra información
    %privada. Ahora, si sólo eso se utiEl problema radica en que sin réplicas, esta información puede
    %fácilmente perderse, 

\subsection{Búsqueda de usuarios, grupos y contenido publicado.}
\label{sec:busqueda}
    La búsquedas de datos dentro de las redes sociales  son de vital importancia para la formación de la
    red. A través de búsquedas es como los usuarios
    pueden encontrar a nuevos contactos dentro de la red y encontrar contenido
    específico según las diferentes necesidades de cada usuario.  Para ello, es
    necesario contar con un sistema que permita realizar búsquedas complejas.
    Esto considera poder buscar elementos que se encuentren dentro de un cierto
    rango de valores y/o que calcen con cierto conjunto de palabras claves.
    Otro punto importante es que sobre la calidad de los resultados que deben
    obtenerse. En el caso de una consulta con miles de resultados, el sistema
    debe saber discriminar cuales son los más relevantes para el usuario, ordenados
    según criterios implícitos o explícitos para ello.


    Además de las funcionalidades básicas esperadas para este tipo de
    búsquedas, se deben considerar que su implementación sea posible según
    las capacidades del sistema. Por ello, debe
    considerarse el almacenamiento requerido para la mantención de los índices
    y los gastos de red requeridos para la realización de la búsqueda
    en sí.
    

    %Si consideramos sólo las imágenes subidas a  Facebook a la fecha, para la
    %realización de las búsquedas, se requiere la indexación de 265 billones de documentos.
    %TODO: ....... costo?

    
    \paragraph{Sistemas centralizados}
    En un sistema centralizado, todos los algoritmos de búsqueda son completos,
    debido a que la información es indexada bajo bases de datos en donde la
    realización de consultas complejas no son un problema. Como poseen el
    conocimiento completo de los índices  y documentos almacenados en el sistema,
    se puede sin grandes dificultades
    ordenar los resultados obtenidos y presentarlos de una forma adecuada. Ahora, el
    almacenamiento debe ser manejado por el sistema, al igual que
    los costos de ancho banda requerido para contestar todas las consultas
    requeridas, incurriendo a costos proporcionales a la cantidad de recursos
    utilizados. 
    
    \paragraph{Sistemas P2P}
    Si ahora pasamos a un sistema distribuido, el tema es complejo. La búsqueda por
    palabras claves es posible dentro de un DHT, pero con grandes
    limitaciones, permitiendo por defecto consultas de sólo una dimensión. La
    realización de búsquedas complejas o por rangos, en cambio, requiere de sistemas de
    indexación adicionales, junto con mecanismos especializados para la
    realización de consultas dentro de ellos.
    Por otro lado, como la información se encuentra distribuida entre los
    diferentes nodos que conforman la red, no es fácil implementar un sistema
    que ordene los resultados de cada búsqueda y entregue, por ejemplo, los 20
    más importantes. Normalmente, los sistemas de
    indexación que se proponen para redes P2P no tratan el problema del manejo de
    miles de resultados, dejando ese trabajo al nodo que realizó la consulta.

    Si vemos las restricciones de almacenamiento de los índices en un DHT y lo
    aplicamos al caso de Twitter, tenemos que, con
    340 millones de tweets por día, en un año tenemos alrededor de 124.000 millones de
    documentos con un largo de hasta 140 caracteres cada uno. Si consideramos
    un promedio de 15 palabras por tweet, un índice invertido de estos
    contendría $124 * 10^9 * 15 = 1860 * 10^9$ identificadores, una cifra
    considerable si pensamos que es similar en orden de magnitud al número de
    índices manejados por Google en el año 2003.
    Ahora, en un DHT, un identificador, que es una llave con la cual puede
    obtenerse el documento, es normalmente un hash de 20 bytes del contenido del
    documento.
    Si consideramos ese peso por cada índice a almacenar en el sistema,
    tenemos en total alrededor de $4 * 10^{13}$  bytes (40 TB). Ahora, gracias
    a la escalabilidad de este tipo de sistema, los índices pueden ser repartidos
    entre todos los usuarios de la red. Considerando la cantidad de usuarios de
    Twitter (140 millones de usuarios), tenemos que cada uno de ellos sólo
    debería dedicar para la indexación de archivos  alrededor de 30 MB, lo cual
    es un costo ínfimo considerando las capacidades de almacenamiento de hoy en
    día.

    A la hora de indexar los documentos, dependiendo de la forma en
    que esto se realice serán los costos de red incurridos en la búsqueda.
    Si consideramos que los índices serán realizado por documento, repartiendo
    los documentos entre los usuarios del sistema, cada uno mantendría un índice
    invertido de forma local. Por ello, cada consulta debe ser distribuida
    hacia todos los nodos del sistema generando una inundación innecesaria de paquetes en el sistema.
    
    Si en cambio se particionan los índices según las palabras claves que
    aparecen en cada documento, un DHT puede ser usado para mapear una palabra
    con el nodo responsable de éste.
    El problema de esto es que si no se ordena y limita los resultados de una búsqueda, una consulta de millones de resultados conllevaría a un enorme
    costo de bando de ancha de la red. Además, una consulta por varias palabras
    claves requeriría del envío sobre la red de los diferentes índices de parte
    de cada nodo responsable, realizando posteriormente el cruce  de la
    información resultante. En el caso de de pocos resultados, esto no es un
    gran problema, pero cruzar índices de billones o millones de resultados entre
    sí es complejo.


    %% A query involving multiple terms requires that the
    %% postings for one or more of the terms be sent over the
    %% network. For simplicity, this discussion will assume
    %% a two-term query. It is cheaper to send the smaller of
    %% the two postings to the peer holding the larger post-
    %% ing list; the latter peer would perform the intersec-
    %% tion and ranking, and return the few highest-ranking
    %% document identifiers.
    %% Analysis of 81,000 queries made to a search en-
    %% gine for mit.edu shows that the average query
    %% would move 300,000 bytes of postings across the
    %% network. 40% of the queries involved just one term,
    %% 35% two, and 25% three or more. mit.edu has 1.7
    %% million Web pages; scaling to the size of the Web (3
    %% billion pages) suggests that the average query might
    %% require 530 megabytes, requiring a factor of 530×
    %% improvement.
    %% Some queries, however, are much more expensive
    %% than this average. Consider a search for “the who”.
    %% Google reports that 3 ∗ 109 documents contain “the”,
    %% and 2 ∗ 108 contain “who”. This query would send
    %% 4 GB over the network, exceeding our budget by
    %% 4000×.



\subsection{Configuraciones de privacidad.}
\label{sec:privacidad}

    Cada usuario, al mismo tiempo que publica contenido, define que permisos
    tendrán los usuarios sobre el mismo. De la misma forma, toda la información que
    es almacenada en la red social debe poseer un sistema que controle los accesos
    y haga que los usuarios sólo puedan realizar las acciones que tienen
    autorizadas.
    
    \paragraph{Sistemas centralizados}
    En un sistema centralizado, tanto como para  todo usuario identificado el
    sistema como para los usuarios anónimos que acceden a él, puede controlar de
    forma completa las acciones que pueden realizar sobre la información
    almacenada. Los subsistemas de seguridad una vez que
    identifican al usuario utilizan listas de control de acceso para aplicar las
    políticas privacidad de cada usuario.
    
    \paragraph{Sistemas P2P}
    % problemas
    % \item No se cuenta con sistemas de control para asegurar la privacidad de los datos compartidos en el sistema.
    % \item No existen una precondición de confianza entre los nodos, por lo que no se puede confiar que todas las operaciones se realizarán como es debido
    % \item ...
    Una red P2P, en cambio, no se tiene un control sobre los nodos que almacenan y
    comparten recursos en la red, y el uso de un DHT no asegura la privacidad de los
    datos compartidos en él. De la misma forma, ningún nodo posee una
    precondición de confianza como para poder asegurar que todas las funciones que
    le sean solicitadas las cumplirá con cabalidad. Esto genera que sean necesarios
    sistemas adicionales que velen por el correcto funcionamiento de los nodos que
    un usuario confía para la realización de las operaciones en la red. Además, se
    requieren que la información replicada en nodos de la red social (para mantener
    la alta disponibilidad de la información) pueda ser almacenada inclusive en
    nodos que no tengan una relación de amistad con el usuario. Una forma de
    seguridad que puede ser aplicada en este tipo de sistemas es la seguridad
    basada en ``capacidades'' (\textit{capability-based security}~\cite{levy1984capability-based}), llamada así por
    el hecho en que los usuarios poseen una llave, única y comunicable, que le otorga
    a su poseedor ciertas capacidades sobre uno o más objetos. De esta forma,
    no se requiere de un sistema central que deba validar cada operación que
    quiera realizarse sobre los objetos del sistema, siendo las ``capacidades''
    que cada participante del sistema posee las encargadas de permitir las acciones
    privilegiadas dentro del sistema.

\subsection{Integración con otros servicios y aplicaciones.}
\label{sec:conectividad}
    % OAUTH
    % TODO: Pasar a conclusiones
    %A pesar de no ser un punto crucial para el desarrollo de una red social, la
    %integración con aplicaciones externas facilita el crecimiento de la red.
    Las aplicaciones externas le otorgan a la red nuevas
    funcionalidades, otorgándole la flexibilidad para la generación de nuevos
    servicios a la medida de cada usuario.
    
    \paragraph{Sistemas centralizados}
    En una red social centralizada, esto es implementado a través del manejo de
    usuarios especializados, a los que se les permite realizar ciertas funciones y
    consultas sobre los usuarios que les han otorgado permisos explícitos para ello.
    Para el manejo de estos usuarios especiales se utilizan bases de datos y
    protocolos especializados de autorización basados en tokens temporales (como
    OAuth) para otorgar acceso limitado a una API pública de la red social. En caso
    de que algún ente externo abuse de la API o trasgreda los términos del servicio
    de la red social, es fácil para ellos denegarle los permisos a ésta y
    bloquearla de la red social.
    
    \paragraph{Sistemas P2P}
    Ahora, dentro de un esquema descentralizado, la integración de aplicaciones
    externas se torna más compleja. Las soluciones utilizadas por gran parte de los
    sitios de redes sociales, OAuth, requiere de un servidor
    central que maneje las credenciales y autorice al agente externo para la
    realización de acciones sobre la red social. Al no existir un ente central
    que pueda realizar esta tarea, se requiere de un nuevo sistema en el cual 
    cada usuario sea el responsable de autorizar las acciones que cualquier agente
    externo realice sobre su espacio personal, con la posibilidad de revocar estos
    permisos si el usuario así lo desea.
    Para poder mantener un control sobre los agentes externos que accederían a
    funcionalidades e información sensible de los usuarios dentro de la red, se
    requerirá de un sistema que detecte cuando exista un abuso y se pasen a llevar
    el acuerdo realizado entre el usuario y la aplicación. Es importante que el
    sistema permita que cada usuario pueda denegar los permisos otorgados, y que
    nuevos usuarios sean alertados del comportamiento del agente externo observado
    dentro de la red social.


\section{Problemas encontrados}

En la sección anterior se lograron identificar las siguientes problemáticas:
\begin{enumerate}
    \item Límite del espacio de almacenamiento que los usuarios están dispuestos a compartir.
    \item Falta de mecanismos eficientes para la realización de búsquedas complejas.
    %\item No existen una precondición de confianza entre los nodos.
    \item Falta de un sistema de control que asegure la integridad de las operaciones en la red.
    \item No se cuenta con sistemas de control para asegurar la privacidad de los datos compartidos en el sistema.
    %%\item Manejo de los diferentes privilegios de acceso y lectura para usuarios y grupos de usuarios.
    %%\item Mantención de datos actualizados en las diferentes réplicas frente a frecuentes salidas y entradas de usuarios
    \item Falta de un sistema que permita la interacción entre agentes externos y la red social.
%    \item Falta de un sistema de autenticación de usuarios
%    \item Falta de mecanismo de ingreso a la red social
%    Dejando de lado la protección de los archivos  compartidos dentro de la red
%social, cada usuario que pariticipe de la red debe poder ser autenticado como
%tal. La asignación de ID únicos de parte del DHT no es suficiente, requiriendo
%que la entrada a a la red 
      % problemas
    \item Mecanismos para limitar de operaciones sobre la red.
      %% PROBLEM: limite de operaciones sobre la red (denegaciones de servicio)
      %Las redes P2P no poseen formas de limitar la cantidad de veces en que un nodo
      %puede realizar una operación dentro de la red, dificultando la limitación
      %del número de intentos fallidos para acceder al sistema y el control de
      %operaciones de registros que un nodo puede realizar.

    \item Información cifrada expuesta a todos los usuarios.
      % PROBLEM: informacion cifrada expuesta a todos los usuarios (ataques offline)
      %Debido a la naturaleza de este tipo de redes, la información requerida
      %para verificar una contraseña se encuentra expuesta a todos los usuarios de la
      %red. Actualmente no es posible prevenir que un atacante obtenga estos
      %datos y se disponga a descifrar los datos almacenados de forma
      %offline. Técnicas de cifrado con \textit{salts} diferenciadas por aca
      %usuario ayudan a mitigar ataques paralelos en contra de múltiples usuarios,
      %pero no resuelven el problema raiz.

    %%\item Actualizaciones de las llaves críticas de un usuario para el funcionamiento de las operaciones en el sistema.
      %% PROBLEM: actualizaciones de llaves críticas para el funcionamiento de operaciones en el sistema
      %En el caso de que una contraseña sea cambiada, las sesiones de usuario
      %iniciadas con la contraseña anterior deben ser revocadas por el sistema.
      %Esto significa que las llaves utilizadas para identificar al usuarios deben ser
      %actualizadas en el sistema. Como asegurar que ésta operación sea completada sin
      %que otro dispositivo haga uso de las credenciales anteriores para obtener
      %acceso y realizar operaciones privilegiadas dentro del sistema, es otro
      %problema que no se encuentra actualmente resuelto.
    
    \item{Colusión de múltiples nodos permite comprometer la integridad de las operaciones en la red.}
     % % PROBLEM: colusión de múltiples nodos de forma de comprometer operaciones basadas en el conocimiento de X nodos 
     % Por último, en el caso de recuperación de contrasenas, la información de
     % una forma u otra, se encontrará almacenada en diferentes nodos de la red
     % social. Esto hace que el sistema sea vulnerable a que múltiples nodos coludan
     % entre sí para recuperar la contraseña - u otro dato privado que se encuentre en
     % el sistema - de un usuario. Es por ello que se requieren sistemas adicionales
     % de seguridad que prevengan, o disminuyan al mínimo, esta posibilidad.

    \item{Falta de un punto de entrada a la red}
\end{enumerate}


  \subsection{Límite del espacio de almacenamiento que los usuarios están dispuestos a compartir.}

    Mientras más usuarios que posea la red estén dispuestos a prestar sus
    recursos de almacenamiento, mayor será este espacio, pero si
    los usuarios no ponen a disposición parte de sus recursos a la red social, la
    cantidad de almacenamiento disponible se ve reducida.

    Considerando un esquema simplificado, en donde los archivos compartidos por
    el usuario en la red social son almacenados en un leafset de una red
    Pastry. Considerando que en Facebook con mil millones de cuentas, se han
    compartido 265.000 millones de imágenes, se tiene un promedio de 265 imágenes por
    usuario. Si tomamos en cuenta que cada imagen pesa alrededor de 1MB, cada
    usuario tendría subido al menos 256MB de datos en la red social.
    Si consideramos una red de 1 millón de usuarios y un leafset de 16 nodos,
    un usuario podría fácilmente llegar a almacenar alrededor de 4GB de información de otros usuarios
    de la red. 
    
    Al requerir estos sistemas de una reserva de más espacio de parte
    de los usuarios con respecto a los servicios web tradicionales, y considerando
    que el espacio requerido para el correcto funcionamiento del sistema va a ser
    mayor que el realmente será utilizado por el usuario, se espera que parte de
    los usuarios del sistema encuentren la forma de evadir este costo adicional,
    transformándose en un tipo de nodo egoístas o \textit{free-riders}. El manejo de éste
    tipo de usuarios es mencionado parcialmente
    en~\cite{Altmann:2009:PFS:1719850.1719891}, pero actualmente no hay una
    solución definitiva al problema.
    
    % mejoras?
    % \item Almacenamiento con funcionalidades diferenciadas para imágenes y video.# Streaming de datos p2p?
    % \item Mejora de la disponibilidad de la información utilizando la información de diferencia horaria
    
    %%\subsubsection{Disponibilidad de los datos}
    %%%conectividad y disponibilidad de la información
    %%Otro punto a considerar dentro de la capa de almacenamiento es la
    %%disponibilidad de la información almacenada. Los sistemas P2P, al no poder
    %%asegurar que todos los nodos que conforman la red se mantendrán
    %%disponibles a lo largo del tiempo, se deben integrar diferentes mecanismos
    %%para aumentar la confiabilidad y disponibilidad de los datos, siendo de gran
    %%importancia para la mantención de los servicios de toda la red social.
    %%% delay-tolerant social networking
    %%El manejo de archivos en redes sociales se caracteriza por poseer una
    %%\textit{gran cantidad de archivos pequeños}, pero con un alto tráfico de los
    %%mismos, y una demanda y capacidad de datos \textit{asimétrica}. Es por ello que
    %%para mantener la alta disponibilidad de los datos, se aplican técnicas
    %%que busquen la alta concurrencia y replicación de la información,
    %%características que ya poseen las redes P2P estructuradas.
    %%
    %%%En~\cite{conf:buchegger:delay-tolerant} se estudia la aplicación de protocolos
    %%%de comunicación
    %%%\textit{delay-tolerant}\footnote{http://en.wikipedia.org/wiki/Delay-tolerant\_networking}
    %%%para aprovechar la estructura de la red distribuida aplicada a las
    %%%interacciones offline que se puedan dar entre los usuarios.
    %%
    %%Una solución parcial a este problema es la vista
    %%en~\cite{journals:corr:abs-1101-4260}, en donde estudian la utilidad del uso de la
    %%diversidad horaria y geográfica para la reducción de la carga del sistema de
    %%disponibilidad de la información, aprovechando de que los usuarios siguen un
    %%patrón diurno de disponibilidad en diferentes partes del mundo con diferentes
    %%zonas horarias, llegando a un \%100 de disponibilidad con un sobre-costo
    %%mínimo.
    %%%, pero dejando para trabajos futuros el manejo de nodos maliciosos dentro del
    %%%sistema.
    %%
    %%\subsubsection{Bando de ancha}
    %%El ancho de banda de la transmisión de datos de Internet no es equitativo para
    %%todos los miembros de la red. Son muy pocos los nodos que cuentan con una
    %%conexión simétrica para la subida y bajada de archivos, debido a los altos
    %%costos asociados a ello. Es por eso que si el costo
    %%de bando de ancha para la mantención de la red social es muy alto, se
    %%necesitarán de mecanismos de balanceo de carga adicionales para equilibrar el
    %%flujo de datos entre un nodo y otro. Es importante que la experiencia de
    %%usuario sea lo más fluida posible, ya que a diferencia de otros servicios,
    %%los usuarios están acostumbrados a  tiempos de carga
    %%menores a los 3 segundos. Este problema actualmente lo sufren los
    %%sistemas centralizados, los cuales deben invertir grandes sumas de dinero en
    %%ancho de banda, debido a las grandes cantidades de datos trasmitidos.
    %%
    %%Un sistema P2P centralizado podría entregar un mejor desempeño poseer un
    %%balanceo de carga natural gracias a la forma en que distribuye y recupera los
    %%datos a lo largo de los nodos pertenecientes en la red.
    %%
  \subsection{Falta de mecanismos eficientes para la realización de búsquedas complejas}

    El filtrar publicaciones por fecha y otros atributos también es parte del trabajo
    realizado por la capa de búsqueda de la red. Para ello, es
    necesario que el sistema soporte tanto consultas de rango como por
    múltiples parámetros que permitan éste tipo de búsquedas.
    
    El tema es especialmente complejo en redes basadas en DHT, principalmente
    porque las tablas de hash uniforme destruyen el todo orden para la
    localización de la información, quedando esta distribuida en cada nodo de
    la red sin existir una relación entre ellos y la información que almacenan.
    Para poder realizar búsquedas de este estilo, es necesaria la
    implementación de índices sobre los datos almacenados en ellas.

     Existen un gran rango de sistemas de indexación propuestos, los cuales pueden clasificarse en
    dos tipos: las \textit{sobre DHTs} y las \textit{dependientes del sistema de red}.
    Las primeras permiten una fácil implementación sobre cualquier DHT existente,
    haciendo uso de las interfaces genéricas que éstos proveen, sin hacer modificación
    alguna al sistema de red por sobre el cual está montado. Por el contrario, las
    otras soluciones están estrechamente ligadas con el sistema de red en el cual
    fueron implementados, normalmente haciendo uso de modificaciones a los otros
    sistemas con los que interactúan de forma de hacer posible su funcionamiento
    y/o optimizar el rendimiento de sus funcionalidades.
    Dos puntos son críticos para el rendimiento de un sistema de
    búsquedas sobre un DHT, la \textit{eficiencia de la consulta} y el
    \textit{costo de mantención del índice}. En redes sociales, cada entrada y
    salida de un nodo usualmente resultan en operaciones de inserción o borrado
    en el sistema, a la vez que la cantidad de entradas y salidas dentro del
    sistema ser tan alto como la cantidad de consultas que se realizan. Esto
    significa que cada actualización en el sistema requiere de actualizaciones de
    los índices de los datos, haciendo que el costo de la mantención del índice un
    problema no menor. Por ello, se necesita que el sistema de indexación de datos
    sea eficiente tanto con los tiempo de búsqueda como con el costo de mantención
    del mismo. Sin embargo, muchos de los sistemas existentes se enfocan en bajos
    tiempos de búsqueda a cambio de un mayor costo de mantención, manteniendo un costo prohibitivamente alto
    que vuelve poco escalable al sistema P2P.  % dentro de estas soluciones, podemos mencionar a:

    Dentro de los métodos de indexación que permitan realizar
    búsquedas complejas (LIGHT~\cite{journals_tkde_TangZX10},
    DRing~\cite{hidalgo2011dring}), también existen diversas propuestas para mejorar otros tipos de
    búsquedas dentro de la red~\cite{5345647, Ng02peerclustering, conf:infocom:SripanidkulchaiMZ03}.
    %%Otros sistemas que proponen eficiencia por ambos lados, como 
    
    %\begin{itemize}
        %\item LIGHT
        %\item ...
        %\item 1- DHT de búsquedas (LIGHT) + CORPS
    %\end{itemize}
    
    
    
    %% TODO: Sacar bien el problema del paper de LIGHT
    %% El problema está en que todavía los métodos de indexación siguen siendo muy
    %% costosos para su implementación, creciendo exponencialmente su 
    
    %  En~\cite{5345647} se presenta un algoritmo de búsqueda Peer-to-Peer que utiliza el
    %conocimiento de los intereses de los usuarios para agruparlos en grupos para
    %encontrar contenidos de características similares. El algoritmo se ajusta
    %dinámicamente a las diferentes entradas y salidas de los usuarios, dividiendo o
    %juntando grupos a medida que los interés vallan cambiando. En comparación con
    %otros algoritmos de búsqueda como el
    %firework method~\cite{Ng02peerclustering}
    %y interest-based shortcut method~\cite{conf:infocom:SripanidkulchaiMZ03}
    % tiene una mayor robustez frente a una
    %red con altas tasas de entrada y salida de usuarios.
    
    
%    \subsubsection{Sistemas de subscripción/publicación}
%    
%    Una alternativa para la obtención del contenido de los usuarios entre sí sin
%    tener que realizar una búsqueda específica por el nuevo contenido compartido,
%    es la implementación de sistemas de subscripción, los cuales permites abstraer
%    al que publica de los problemas de distribución del contenido hacia los
%    subscriptores (o \textit{seguidores}) del mismo. Existen dos tipos de sistemas
%    de subscripción; los basados en tópicos y los basados en el contenido. Los
%    primeros, los generadores de contenido organizan la información publicada en tópicos a los cuales los otros
%    usuarios se suscriben. En cambio, los basados en tópicos publican el contenido
%    abiertamente a todos los suscriptores, siendo ellos los que pasan a filtrar el
%    contenido, según ciertos tópicos definidos por cada uno de los receptores de la
%    información.
%    
%    % TODO:
%    % mencionar porque estos sistemas son importantes (sistema de notificaciones y
%    % seguimiento de actualizaciones entre los usuarios)
%    % y los problemas involucrados en una red social p2p
%    
%    %%\subsection{No existen una precondición de confianza entre los nodos}
  \subsection{Falta de un sistema de control que asegure la integridad de las operaciones en la red}

    No es posible asegurar de antemano si otro nodo dentro de la red se
    comportará como es debido, por lo que no se puede confiar en que las
    operaciones que realice serán ejecutadas correctamente. Esto involucra a todas
    las funcionalidades del sistema, desde las operaciones de búsqueda a las de
    almacenamiento de la información y la mantención de réplicas de la red. 
    
    El problema está en que la falta de un control central y el gran dinamismo de este tipo de redes hace difícil que
    los diferentes nodos confíen entre sí. Es importante el establecimiento de
    lazos de confianza para el funcionamiento de los diferentes servicios de la red
    social, de tal forma de poder realizar operaciones dentro de la red sin temer
    por la integridad de los datos que comparte red. Nodos de los cuales se
    desconfía pueden tener fallas, ser maliciosos y/o ser participantes de ataques en
    contra la red.
    Los comportamientos anómalos pueden reflejarse de muchas formas
    diferentes dentro de la red. El hecho de que un nodo se niegue a almacenar
    información que se le confía, transmita la información que se le confía a
    terceros sin autorización para ello, responda con datos falsos o manipulados,
    son comportamientos que deben detectarse para poder discriminar los nodos
    confiables de los que no lo son.
    
    Dentro de las soluciones existentes para la construcción de de lazos de
    confianza en redes P2P, los sistemas de reputación y los sistemas de
    rendición de cuentas han demostrado ser muy buenas y eficientes para este propósito.
    
    \subsubsection{Sistemas de rendición de cuentas}
    Éstos sistemas detectan y exponen los nodos en falta a través de registros de
    toda acción realiza por cada nodo. Para ello, los nodos deben ser
    periódicamente revisados por otros, quienes deben re-ejecutar el protocolo
    usando los datos ingresados en el registro. Este método puede ser
    computacionalmente caro si el protocolo a analizar es computacionalmente complejo.
    Lamentablemente éste mecanismo no detecta a los comportamientos maliciosos que no estén
    relaciones con un protocolo o que no sean verificables a través de
    transacciones deterministas.
    
    \subsubsection{Sistemas de reputación}
    Los sistemas de reputación evalúan a un nodo utilizando la
    información del resultado de las interacciones que han tenido otros nodos con
    él. Esta evaluación es una estimación de cómo será el comportamiento futuro del
    nodo frente ciertas situaciones. Como no hay necesidad de conocer que protocolo
    el nodo está realizando, éstos sistemas son fácilmente aplicables. Sin embargo,
    esto significa que la información recopilada no constituye de una prueba
    irrefutable de mal comportamiento; también hace prácticamente imposible la
    detección de ataques realizados únicamente una vez. Si un nodo falla una vez,
    tiene la posibilidad de redimirse y mejorar su reputación realizando
    transacciones de forma correcta. Los sistemas de reputación sólo proveen la
    habilidad para un nodo de encontrar la reputación de un nodo dado, en orden de
    decidir si hacer o no una transacción con él.
    
    %% TODO: redactar mejor esto -->
    %%Los requisitos para la implementación de éste sistema es que las estructuras
    %%sociales que se definan tengan:
    %%\begin{itemize}
    %%    \item Confianza mutua entre los usuarios de la estructura.
    %%    \item Un nivel mínimo de confianza entre los usuarios.
    %%    \item Después de cierto intervalo, las relaciones de amistad deben ser
    %%verificadas nuevamente.
    %%\end{itemize}
    
     Si bien se pueden construir sistemas de reputación utilizando de base las
    relaciones entre los usuarios de la red social, dándole
    mayor importancia a las recomendaciones realizadas por usuarios relacionados
    con uno que con los que no mantiene ninguna relación, la confianza entre los
    nodos no puede basarse únicamente en ello. % TODO: Completar falencias de las
    %relaciones de confianza en el establecimiento de un sistema de reputación
    
    %%A continuación se pasan a analizar subproblemas que nacen de ésta problemática,
    %%siendo analizados por separado según corresponda:
    
    %% %% TODO: sistemas de confianza
    %%
    %%\paragraph{Identificación de usuarios}
    %%%diferencias con sistemas centralizados
    %%El problema de la identificación del usuario reside en que no existen entes
    %%confiables en el sistema con los cuales se pueda realizar un proceso de
    %%identificación como en los sistemas centralizados. Existen propuestas y
    %%optimizaciones de sistemas de identificación del usuario en sistemas
    %%distribuidos, pero requieren de la precondición de confianza con algún nodo
    %%preexistente, lo cual no es el caso sin que se implementen mecanismos para
    %%mantener este tipo de relaciones entre los nodos. 
    %%
    %%Ahora, se pueden utilizar dos tipos de sistemas:
    %%\begin{enumerate}
    %%    \item Centralizado para sólo el manejo de la identificación y
    %%    almacenamientos de llaves privadas.
    %%    \item Distribuido, en donde no se conoce ni donde ni como están las llaves
    %%    almacenadas entre diferentes nodos del sistema.
    %%\end{enumerate}
    %%
    %%
    %%%\subsubsection{Identificación de usuarios}
    %%
    %%    %\paragraph{Identificador Global Único}
    %%    %\paragraph{Procedimiento de identificación}
    %%
    %%%\subsubsection{Permisos de usuario}
    %%
    %%
    %%        %\red{Identificación de usuarios.}
    %%
    %%%homomorfic encryption
    %%%estudiando diferentes sistemas de cifrado para asegurar la privacidad del
    %%%contenido distribuido~\cite{homenc}, pero todavía quedan muchos temas por
    %%    %\paragraph{Obtención de un archivo}
    %%
    %%%\subsubsection{Control de nodos maliciosos}
    %%    %\paragraph{Control del Spam}

    

  \subsection{No se cuenta con sistemas de control para asegurar la privacidad de los datos compartidos en el sistema.}

    %%\subsection Manejo de los diferentes privilegios de acceso y lectura para usuarios y grupos de usuarios.
    El uso de un DHT no asegura la privacidad de los datos
    compartidos en él. Para prevenir que usuarios sin permisos puedan acceder a los
    archivos de otros, es necesario contar con mecanismos de control de acceso.
    Este control de acceso es fundamentalmente diferente al utilizado en soluciones
    centralizadas, debido a que la información no se encuentra todo el tiempo
    disponible junto a su dueño. Esta es distribuida a través de la red,
    siendo almacenada en máquinas de otros usuarios, sin que éstos necesariamente
    posean los permisos para acceder a éstos datos.
    
    Por ello, se busca un sistema de seguridad basado en ``capacidades'' (\textit{capability-based
    security}~\cite{levy1984capability-based}), en donde los usuarios poseen una llave, única y comunicable, que le otorga
    a su poseedor ciertas capacidades sobre uno o más objetos. De esta forma,
    no se requiere de un sistema central que deba validar cada operación que
    quiera realizarse sobre los objetos del sistema, siendo las ``capacidades''
    que cada participante del sistema posee las encargadas de permitir las acciones
    privilegiadas dentro del sistema.

     La implementación de un sistema de seguridad basado en capacidades puede
    implementarse a través de sistemas de cifrado, que a través de llaves
    simétricas y asimétricas, otorgue los privilegios adecuados a los usuarios que
    las posean.

    De esta forma, el control de acceso basado en
    técnicas de cifrado se basa en identificación a través de llaves. A través de éstas, es
    con las que los usuarios  después de la identificación pueden
    descifrar la información almacenada en el sistema. Esto hace posible
    desarrollar un sistema que utilice la
    llave del usuario y autorice con ella el acceso a la información.

    Ahora, dependiendo del algoritmo que se use será la eficiencia y
    capacidades que podrán ser implementadas, siendo un punto de investigación
    importante para la resolución del problema.

    %Para la autorización de usuarios y poder controlar a que cosas puede o no
    %realizar cada usuario, se requiere de un buen mecanismo de cifrado. Esto
    %es debido a que si la información se enviara sin cifrado al almacenamiento
    %compartido de la red social, cualquier usuario podría acceder a ella, pudiendo
    %leerla y modificarla sin ninguna dificultad. Eso es cierto tanto para los
    %archivos compartidos dentro de la red, como para toda información que se
    %comparta dentro de ella.
     A continuación se analizará más a fondo los requerimientos que necesitaría el
    mecanismo de cifrado de una red social P2P distribuida para la
    implementación de un sistema de control para la privacidad de los datos
    compartidos en la red, enfocándonos en tres puntos esenciales; eficiencia,
    funcionalidad y privacidad.

    \paragraph{Eficiencia}
    
    Para alcanzar un fino control de acceso, cada objeto debería ser
    cifrado de forma separada para diferentes sets de destinatarios, de tal
    forma que los objetos cifrados no se puedan relacionar entre sí, y el cambio
    en uno de ellos no afecte a los demás. Eso genera que para toda llave que sea
    renovada, es necesario el recifrado de todos los datos para mantener los
    permisos vigentes. Mientras esta operación no es un gran problema para
    grupos pequeños de objetos, el recifrado de grandes cantidades de objetos
    pueden ocasionar problemas de rendimiento.
    La mantención de claves antiguas y nuevas con recifrado bajo demanda o la
    renovación de llaves en momentos en que el usuario no esté haciendo uso del
    sistema, podrían servir para disminuir los problemas de rendimiento de este
    tipo de operaciones, pero el costo base sigue dependiendo del tiempo
    requerido para la realización de cada cifrado.
    %Ahora, aunque podría ser mejor hacer éste procedimiento de renovación a todas
    %las llaves de usuario simultáneamente (de tal forma de hacer este
    %recifrado una sola vez), con grandes cantidades de objetos éste proceso
    %puede ser bastante costoso en tiempo.

    %ejemplo de porque se requiere eficiencia
    Por esto y otros motivos, como la usabilidad del sistema, se requiere que el
    proceso de cifrado sea rápido. Operaciones de diferente tipo, como
    publicar un mensaje o foto, inclusive con un cifrado poco eficiente no
    tomaría mucho tiempo para completar, pero la obtención de las publicaciones
    recientes, incluyendo mensajes, álbumes de fotos y otros objetos del sistema
    puede consumir un gran tiempo antes de completarse.
    % primer requerimiento (... no existe  nada así xD)
    El cifrado, al ser una de los cimientos básicos del sistema, también
    afecta a la escalabilidad del mismo. Es por todo esto que el primer
    requerimiento es un costo constante del cifrado/descifrado, sin
    depender de la cantidad de destinatarios de la información. Lamentablemente, al
    día de hoy no se ha desarrollado un método de cifrado y descifrado
    que no dependa de la cantidad de destinatarios.
    %grupos de usuarios en sistemas centralizados y distribuídos
    En los sistemas centralizados, la inserción o borrado de un miembro de algún
    grupo afecta a todos los objetos a los cuales ese grupo tiene acceso, cosa que
    no pasa con los sistemas de control de acceso basados en cifrado.  Ese
    comportamiento no es escalable, siendo no adecuado para el
    manejo de los permisos en redes sociales, las cuales tienen altas tasas de
    modificaciones de los grupos de acceso y de publicación de nuevos contenidos.
    Por ello, el segundo requerimiento es que la adición y remoción de nuevos
    usuarios de un grupo no debería depender del número de objetos, y debería tener
    un costo constante, como lo visto en sistemas centralizados, y si el sistema de
    cifrado no posee un costo constante para ello, al menos debería ser
    posible de recifrar los objetos lo más rápido posible.
    % problema de almacenamiento
    Otra problemática con la cifrado, es el aumento del uso de espacio de
    almacenamiento debido al excedente generado por el método de cifrado. Para archivos pequeños, los encabezados del método de
    cifrado pueden llegar a ser comparables o mayores a la información que se
    está cifrando. Además, si el tamaño del encabezado depende del número de
    destinatarios, el método no sería adecuado para una red social P2P si se
    considera un alto número de destinatarios. Es por ello que el siguiente
    criterio es la escalabilidad del encabezado en términos del número de
    destinatarios, y en segundo lugar, el tamaño extra de la información
    cifrada.
    
    \paragraph{Funcionalidad}
    Diferentes tipos de métodos de cifrado poseen diferentes propiedades, por
    lo que pueden ser utilizados para realizar diferentes funcionalidades dentro de
    la red social P2P. Aún así, el sistema de cifrado que combina diferentes
    modelos de cifrado debería ser capaz de cumplir con todas las
    funcionalidades de la red social. 
    %funcionalidad
    Viendo a detalle, el sistema de cifrado debería permitir
    cifrar objetos tanto como para un sólo sujeto como para un conjunto de éstos
    eficientemente, de tal forma de contar con la flexibilidad suficiente para
    soportar las diferentes funcionalidades de la red social.
    
    Lamentablemente, una cifrado eficiente que permita operaciones de unión
    %, intersección y diferencia de conjuntos no es soportada por todos los sistemas
    y diferencia de conjuntos no es soportada por todos los sistemas
    de cifrado. Estas operaciones son necesarias debido a que las conexiones
    de los usuarios pueden tener diferentes orígenes y diferentes niveles de
    confianza. Tales operaciones como cifrado para un grupo de uno que no es
    un miembro y cifrado para los ``amigos de los amigos'' son incluso menos
    frecuentes de encontrar en los diferentes sistemas existentes, a pesar de que
    son analogías a operaciones muy comunes dentro de las redes sociales y la vida
    diaria.
    
    
    \paragraph{Privacidad}
    En un sistema distribuido, el control de la información es mucho más difícil
    que el de uno centralizado. No sólo se necesita proteger la información
    cifrada, sino también los sujetos que tienen la capacidad de acceder a ésta,
    junto con la cantidad de objetos cifrados y su tipo, entre otras cosas. De la misma
    forma, no debería ser posible para alguien verificar si un usuario en
    particular tiene acceso a un objeto específico. El usuario debería ser capaz de
    ver sólo la información dirigida a su persona o a alguno de los grupos a los
    cuales pertenezca. El requerimiento de un fino control de acceso se traduce en un
    conjunto de objetos cifrados separadamente. Los usuarios deberían poder
    determinar cuales archivos son capaces de abrir sin abrir todos los archivos,
    sino, el sistema perdería escalabilidad. Y al mismo tiempo, los encabezados de
    cifrado de un objeto deberían tener la capacidad de no revelar los
    sujetos que tienen permisos de acceso. Si la lista de acceso se mantiene junto
    con la información cifrada, usuarios maliciosos pueden reconstruir
    completamente la red de contactos a través de esas listas. Adicionalmente,
    ellos podrían llegar a conocer quienes pueden acceder a los objetos
    cifrados e inferir información sensible con ese conocimiento.
    
    \paragraph{Lista de criterios}
    Para resumir, los criterios a considerar:
    \begin{enumerate}
        \item Eficiencia en la adición y borrado de usuarios de cada grupo.
        \item Eficiencia en la revocación de la llave del usuario.
        \item Eficiencia en el cifrado/descifrado.
        \item Eficiencia en el peso de la cabecera del método de cifrado.
        %\item Habilidad de cifrar para grupos aplicandole operaciones de conjuntos (unión/intersección/diferencia).
        \item Habilidad de cifrar para grupos aplicándole operaciones de conjuntos (unión/diferencia).
        \item Habilidad de cifrar para grupos de los cuales uno no es miembro.
        \item Habilidad de cifrar para ``amigos de amigos''.
        \item Habilidad que permita no revelar las estructuras de acceso en la cabecera de los objetos cifrados.
    \end{enumerate}

    %desventajas del esquema distribuido
    Ahora, normalmente las llaves de los usuarios son dadas por un tiempo mucho
    mayor en comparación con otras llaves de acceso utilizadas por otros sistemas
    centralizados, por lo que existe una mayor probabilidad de poder ser robadas o perdidas.
     Las llaves criptográficas también son propensas al envejecimiento. Y a pesar que la
    renovación de las llaves no son tan frecuentes, pueden tener grandes
    consecuencias debido al fino nivel de los requerimientos de control de acceso.
    
     En~\cite{conf:acsac:VuABD09}, para proveer
    seguridad y privacidad de los datos de los usuarios, proponen el cifrado de
    las réplicas de los datos, distribuyendo su almacenamiento entre los usuarios más
    confiables del dueño de la información, utilizando las relaciones del dueño
    para estimar la confianza de un usuario hacia otro, pero no especifican que
    método de cifrado debería utilizarse en casos como éste.
    

    Por otro lado, esquemas de cifrado DIBBE~\cite{Buchegger:Encryption:2011} %~\ref{sec:DIBBE},
    permitirían la elaboración de un sistema de asignación de permisos
    parciales y/o completos entre los miembros de la red social,
    a pesar de que no cumplen con la todas de las propiedades detalladas anteriormente,
    presentando algunas limitaciones que todavía no se encuentran resueltas.

  \subsection{Falta de un sistema que permita la interacción entre agentes externos y la red social}
    
    Es necesario incorporar a la red P2P un sistema que permita autorizar y
    asignar permisos a entidades que no son personas dentro de la red social.
    Estas entidades pueden ser aplicaciones, servicios o plugins alojados en
    servidores centralizados que deseen interactuar con los usuarios de la red
    social.

    El problema que existe es que todos los algoritmos desarrollados para una
    red P2P consideran que los actores pertenezcan a la red. De forma
    similar al problema que uno encuentra para ingresar por primera vez a la red, se requiere el
    conocimiento de al menos un nodo de ella para poder interactuar con la red.
     Sin un servicio centralizado que se encargue de publicar una lista con los
    nodos de acceso disponibles, es difícil la creación de una API para que las
    aplicaciones puedan realizar operaciones sobre la red. 

    %Por ello, se requeriría
    %e una cantidad específica de nodos especializados que realicen las consultas
    %equeridas por las entidades externas dentro de la red social.

    Además, el sistema que controle la asignación de permisos dentro de la red
    debe poder diferenciar entre una aplicación y una persona, de tal forma de
    que el usuario siempre esté consciente de que permisos está otorgando a agentes externos.
    
    \subsubsection{Control y seguimiento de aplicaciones externas}
    
    %La red social, contando con una API que permita que aplicaciones de terceros
    %interactúen con ella, 
    
    %Las aplicaciones desarrolladas por terceros que deseen interactuar con la API
    %de la red social, deben cumplir con ciertos requisitos mínimos para asegurar la
    %%integridad y seguridad de la información otorgada por los usuarios. 
    Al igual que para otro usuario de la red social, las entidades
    externas deben ser controladas de tal forma de poder notificar a los
    usuarios sobre el comportamiento que éstas tengan en la red.
    
    Además, debido a la naturaleza de la información a la cual se les da
    normalmente acceso, es necesario que el sistema notifique sobre problemas al
    usuario, ayudándolo a discriminar a las aplicaciones que no cumplan con sus
    compromisos para con la red social y hagan un mal uso de la API ofrecida para
    ellas. Para ello, se puede implementar un
    sistema de reputación en conjunto con uno de suscripción que se encargue de
    notificar a los usuarios en caso de que una aplicación halla pasado los
    límites permitidos dentro de la red social.

  \subsection{Mecanismos para limitar operaciones sobre la red.}
      %% PROBLEM: limite de operaciones sobre la red (denegaciones de servicio)
      %Las redes P2P no poseen formas de limitar la cantidad de veces en que un nodo
      %puede realizar una operación dentro de la red, dificultando la limitación
      %del número de intentos fallidos para acceder al sistema y el control de
      %operaciones de registros que un nodo puede realizar.
      De forma similar al problema de los mecanismos de control para asegurar
      la integridad de las operaciones en la red, es importante que algunas
      operaciones sean limitadas para evitar abusos de parte de nodos maliciosos
      dentro de la red. 
      Una de las operaciones que debe controlarse es la de registro de un nuevo
      nodo en la red, ya un nodo malintencionado podría realizar múltiples
      peticiones de registro de forma de reservar cuentas de usuario dentro de la
      red, dificultando o imposibilitando el registro de algún usuario que desea
      registrarse legítimamente en el sistema.

      Ataques de este tipo son conocidos como ataques de ``Sybil'', en donde se
      intenta conseguir el control de un alto porcentaje de los nodos de la red
      realizando un solo usuario múltiples registros dentro de ella.

      Por otro lado, nodos que se dediquen a recolectar datos de los usuarios
      de la red, o que busquen realizar flooding por repetición de ciertas
      operaciones deberían poder ser detectados y limitados en la red.

      La limitación de operaciones dentro de la red requiere de la existencia
      de auditores que monitoreen las acciones de los usuarios dentro de la red y de
      nuevos nodos sin identificar que quieran ingresar a la misma. Esto es
      complicado debido a que son los mismos nodos de la red los que deben asumir
      este rol, siendo vulnerables a colusión y otros tipos de ataques que
      comprometan la confiabilidad del sistema. Además, el monitoreo de las
      acciones dentro de la red conlleva a la realización de consultas adicionales,
      aumentando la carga de la operación dentro de la red y los tiempos de
      realización de la misma.
       %entre el rendimiento de la operación y 

  \subsection{Información cifrada expuesta a todos los usuarios.}
      % PROBLEM: informacion cifrada expuesta a todos los usuarios (ataques offline)
      %Debido a la naturaleza de este tipo de redes, la información requerida
      %para verificar una contraseña se encuentra expuesta a todos los usuarios de la
      %red. 
      La funcionalidad para ingresar a la aplicación haciendo uso de un
      usuario/contraseña, requiere que información cifrada sea almacenada en la
      red social con permisos de lectura públicos para cualquier usuario que desee
      ingresar a la red. Esto permite que cualquiera, una vez que encuentra la
      información, pueda recopilarla e intentar su descifrado. Esto hace que
      la información pública quede vulnerable a ataques sin
      que el atacante necesite mantenerse conectado con la red social, haciendo
      posible que tarde o temprano se logre el descifrado de los archivos
      obtenidos de esta manera.

      Actualmente no es posible prevenir que un atacante obtenga estos
      datos y se disponga a descifrar los datos almacenados de forma
      offline.
      Considerando una función de cifrado $h$ fija, $ h(m) = c$,  en donde  puede se verifica en
      contra de $c$ para autenticar. Un atacante
      que halla recopilado una gran cantidad de cifrados $c$, puede utilizar
      ``rainbow tables'' (listas de valores precalculados de
      $c$ para ``todos'' los $m$) para encontrar la relación entre algún $c$ y
      $m$ dado.
      De forma de disminuir la eficacia de este tipo de ataques, se hace uso
      técnicas de cifrado con una ``sal'' $s$, de tal forma de hacer que la función
      de cifrado sea $h(m+s) = c$, inhabilitando la capacidad de precalcular
      utilizando un diccionario los valores de $c$ si es que no se conoce el
      valor de $s$. Haciendo que cada usuario use una sal diferente para cifrar
      su contraseña, hace que un atacante deba formar un ``rainbow table''
      diferente para cada usuario que desee atacar, disminuyendo la
      eficacia de ataques paralelos en contra de múltiples usuarios.

      A pesar de todo, este tipo de soluciones no resuelven el problema raíz,
      permitiendo que un atacante, con el tiempo y capacidad computacional
      necesaria, pueda descifrar los datos estando offline.

      %The problem of a server performing offline attacks against
      %its password database was treated by Ford and Kaliski [20].
      %Their techniques are client-server based, and require all servers
      %to be online for a login. We leave it as future work to
      %investigate modifying their protocol to be applicable also in a
      %P2P setting. This would prevent offline guessing attacks.


  %% NO ES SUFICIENTE! :D
  %%% Será mejor como mantención de la consistencia y homogeneadad de los datos ?
  %%\subsection{Actualizaciones de las llaves críticas de un usuario para el funcionamiento de las operaciones en el sistema.}
  %%    %% PROBLEM: actualizaciones de llaves críticas para el funcionamiento de operaciones en el sistema
  %%    %En el caso de que una contraseña sea cambiada, las sesiones de usuario
  %%    %iniciadas con la contraseña anterior deben ser revocadas por el sistema.
  %%    %Esto significa que las llaves utilizadas para identificar al usuarios deben ser
  %%    %actualizadas en el sistema.
  %%    En el caso específico del sistema de identificación del usuario, la
  %%    operación de actualizar las credenciales debe completarse sin que otro
  %%    dispositivo haga uso de las credenciales anteriores para obtener
  %%    acceso y realizar operaciones privilegiadas dentro del sistema.
  %%    Básicamente, el sistema debe poder bloquear las credenciales antiguas
  %%    mientras que las actualiza por unas nuevas. Dependiendo de la cantidad de
  %%    nodos involucrados en la mantención de las credenciales de los usuarios y
  %%    del sistema de identificación, el tiempo que tome realizar esta operación
  %%    es variable. El problema se encuentra en que aunque las operaciones
  %%    relacionadas con cada nodo se realicen en paralelo, uno de éstos puede no
  %%    encontrarse conectado en ese momento, debiendo esperar a su reconexión para la
  %%    actualización de sus datos.

  %%    Es importante que los nodos mantengan un estado homogéneo dentro de la
  %%    aplicación, actualizando el estado de cada dispositivo al momento de
  %%    reconectarse en la aplicación.
  %%    
  %%    Normalmente los sistemas de ruteo P2P centralizados ya cuentan con
  %%    mecanismos de sincronización para evitar la segmentación de la red. De
  %%    forma similar, se requerirá de una solución que se integre de forma adecuada a
  %%    las operaciones que deberán realizarse en el sistema para evitar
  %%    inconsistencias en la red.
    
  \subsection{Colusión de múltiples nodos permite comprometer la integridad de las operaciones en la red.}
        
      % % PROBLEM: colusión de múltiples nodos de forma de comprometer operaciones basadas en el conocimiento de X nodos 
      % Por último, en el caso de recuperación de contrasenas, la información de
      % una forma u otra, se encontrará almacenada en diferentes nodos de la red
      % social. Esto hace que el sistema sea vulnerable a que múltiples nodos coludan
      % entre sí para recuperar la contraseña - u otro dato privado que se encuentre en
      % el sistema - de un usuario. Es por ello que se requieren sistemas adicionales
      % de seguridad que prevengan, o disminuyan al mínimo, esta posibilidad.
      En redes P2P, la integridad de muchas de sus operaciones depende de
      grupos de nodos independientes entre sí, haciendo muy poco probable que
      todos ellos se encuentren desconectados en un mismo momento. A su vez,
      esta independencia permite utilizar técnicas para ofuscar información
      distribuyéndola en diferentes nodos de la red, sin temer en que exista una
      comunicación entre ellos dedicada a descubrir lo que se les ha confiado.
      
      Es por ello que atacantes pueden aprovecharse de esta característica, buscando controlar
      la mayor cantidad de nodos dentro de la red.
      Dentro de éste tipo de ataques, es muy conocido el de ``Sybil'', que busca obtener el
      control de un gran porcentaje de los nodos de la red a través del registro de
      múltiples usuarios dentro de ella. Este ataque es considerado un problema que debe
      ser mitigado de alguna forma por la red.

      Si bien esto no es posible de resolver por completo sin hacer
      uso de sistemas centralizados, la efectividad de los ataques ``Sybil''
      pueden reducirse aumentando la complejidad y tiempo requerido para que un
      usuario se registre en el sistema. Actualmente existen diferentes
      propuestas para ello, pero es necesario adecuar estas
      soluciones  al sistema de identificación y registro que se implemente, de
      tal forma que realmente afecte al atacante y no signifique un costo prohibitivo
      para el usuario legítimo.
    
  \subsection{Falta de un punto de entrada a la red}
        Para poder ingresar a la red P2P, es necesario que el usuario conozca a
      uno de los nodos partícipes de ésta para poder realizar la operación de
      registro en ella. Como los nodos de una red P2P son dinámicos, a diferencia
      de los sistemas centralizados, no es posible dejar publicado en la Internet
      un registro fijo con una lista de nodos de entrada para conectarse con la
      red. Este problema normalmente se resuelve dejando el ingreso a través de
      invitaciones enviadas desde un nodo que ya se encuentre dentro de la red, o
      utilizando sistemas híbridos que mantienen una puerta de entrada permanente
      hacia el sistema. El problema de estos últimos es el hecho de que el
      sistema pierde escalabilidad al depender de un sistema centralizado para el
      ingreso de más nodos al mismo.

      %Este problema puede mitigarse viendo el sistema como uno
      %friend-to-friend F2F 
    
    
